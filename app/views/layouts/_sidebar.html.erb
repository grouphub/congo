<ul class="sidebar-nav">
  <li class="pull-right" ng-if="shouldShowSidebar()">
    <a href="" ng-click="drawerToggle()" class="sidebar-toggle sidebar-toggle-small">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </a>
  </li>

  <li class="pull-right" ng-if="isSignedin() && currentRole() && !inAdminPanel()">
    <a class="activities-menu sidebar-item-small" href="/accounts/{{accountSlug()}}/{{currentRole()}}/activities">
      <i class="fa fa-th-list"></i>
      <span class="icon-label">{{currentAccount().activity_count}}</span>
    </a>
  </li>

  <li class="pull-right" ng-if="isSignedin() && currentRole() && !inAdminPanel()">
    <a class="messages-menu sidebar-item-small" href="/accounts/{{accountSlug()}}/{{currentRole()}}/messages">
      <i class="fa fa-newspaper-o"></i>
      <span class="icon-label">{{currentAccount().message_count}}</span>
    </a>
  </li>

  <li class="pull-right" ng-if="isSignedin() && !currentRole()">
    <a class="sidebar-item-small" href="" ng-click="signout()" title="Sign Out">
      <i class="fa fa-sign-out"></i>
    </a>
  </li>

  <li class="pull-right" ng-if="isSignedin() && !currentRole()">
    <a class="sidebar-item-small" href="/accounts" title="Accounts">
      <i class="fa fa-building-o"></i>
    </a>
  </li>

  <li class="pull-right" ng-if="isSignedin() && !currentRole()">
    <a class="sidebar-item-small" href="/users/{{currentUserId()}}" title="My Profile">
      <i class="fa fa-user"></i>
    </a>
  </li>

  <li class="pull-right" ng-if="!isSignedin()">
    <a class="sidebar-item-small" href="/users/signin" title="Sign In">
      <i class="fa fa-sign-in"></i>
    </a>
  </li>

  <li class="pull-right" ng-if="!isSignedin()">
    <a class="sidebar-item-small" href="/users/new_manager" title="Sign Up">
      <i class="fa fa-plus"></i>
    </a>
  </li>

  <li class="sidebar-brand">
    <a href="/" class="logo-link">
      <div class="logo"></div>
    </a>
  </li>

  <li class="sidebar-item" ng-if="accountSlug()">
    <a class="heading" ng-href="/accounts/{{accountSlug()}}/{{currentRole()}}">
      {{accountName()}}
    </a>
  </li>

  <li class="sidebar-item" ng-if="inAdminPanel()">
    <a class="heading" ng-href="/admin">
      Admin
    </a>
  </li>

  <li class="sidebar-item" ng-if="!accountSlug() && !inAdminPanel() && accounts().length > 0">
    <a class="heading" ng-href="">
      Accounts
    </a>
  </li>

  <li class="sidebar-item" ng-if="!accountSlug() && !inAdminPanel() && accounts().length > 0" ng-repeat="account in accounts()">
    <a ng-href="/admin" ng-if="account.role.name == 'admin'" title="Admin">
      <i class="fa fa-building-o"></i>
      <span class="caption">
        Admin
        <span class="label label-default role">Admin</span>
      </span>
    </a>

    <a ng-href="/accounts/{{account.slug}}/{{account.role.name}}" ng-if="account.role.name != 'admin'" title="{{account.name}}">
      <i class="fa fa-building-o"></i>
      <span class="caption">
        {{account.name}}
        <span class="label label-default role">{{account.role.english_name}}</span>
      </span>
    </a>
  </li>

  <!-- Admin Carriers -->
  <li class="sidebar-item" ng-if="inAdminPanel()">
    <a ng-href="/admin/carriers" title="Carriers">
      <i class="fa fa-institution"></i>
      <span class="caption">Carriers</span>
    </a>
  </li>

  <!-- Admin Accounts -->
  <li class="sidebar-item" ng-if="inAdminPanel()">
    <a ng-href="/admin/accounts" title="Accounts">
      <i class="fa fa-cubes"></i>
      <span class="caption">Accounts</span>
    </a>
  </li>

  <!-- Admin Invitations -->
  <li class="sidebar-item" ng-if="inAdminPanel()">
    <a ng-href="/admin/invitations" title="Invitations">
      <i class="fa fa-gift"></i>
      <span class="caption">Invitations</span>
    </a>
  </li>

  <!-- Admin Features -->
  <li class="sidebar-item" ng-if="inAdminPanel()">
    <a ng-href="/admin/features" title="Features">
      <i class="fa fa-trophy"></i>
      <span class="caption">Features</span>
    </a>
  </li>

  <li class="sidebar-item" ng-if="currentRole() === 'broker' || currentRole() === 'group_admin'">
    <a ng-href="/accounts/{{accountSlug()}}/{{currentRole()}}/carriers" title="Carriers">
      <i class="fa fa-institution"></i>
      <span class="caption">Carriers</span>
    </a>
  </li>

  <li class="sidebar-item" ng-if="currentRole() === 'broker' || currentRole() === 'group_admin'">
    <a ng-href="/accounts/{{accountSlug()}}/{{currentRole()}}/groups" title="Groups">
      <i class="fa fa-group"></i>
      <span class="caption">Groups</span>
    </a>
  </li>

  <li class="sidebar-item" ng-if="currentRole() === 'customer'">
    <a ng-if="currentAccount().enabled_group_count >0" ng-href="/accounts/{{accountSlug()}}/{{currentRole()}}/groups/{{currentAccount().first_enabled_group.slug}}" title={{currentAccount().first_enabled_group.name}}>
      <i class="fa fa-group"></i>
      <span class="caption">{{currentAccount().first_enabled_group.name}}</span>
    </a>
  </li>
  
  <li class="sidebar-item" ng-if="currentRole() === 'customer'">
    <a ng-href="/accounts/{{accountSlug()}}/{{currentRole()}}/contact" title="Dashboard">
      <i class="fa fa-dashboard"></i>
      <span class="caption">Dashboard</span>
    </a>
  </li>
      
  <li class="sidebar-item" ng-if="currentRole() === 'customer'">
    <a ng-href="/accounts/{{accountSlug()}}/{{currentRole()}}/contact" title="Benefits">
      <i class="fa fa-group"></i>
      <span class="caption">Benefits</span>
    </a>
  </li>
  
  <li class="sidebar-item" ng-if="currentRole() === 'customer'">
    <a ng-href="/accounts/{{accountSlug()}}/{{currentRole()}}/contact" title="Applications">
      <i class="fa fa-group"></i>
      <span class="caption">Applications</span>
    </a>
  </li>
  
  <li class="sidebar-item" ng-if="currentRole() === 'customer'">
    <a ng-href="/accounts/{{accountSlug()}}/{{currentRole()}}/challenges" title="Challenges">
      <i class="fa fa-group"></i>
      <span class="caption">Challenges</span>
    </a>
  </li>
  
  <li class="sidebar-item" ng-if="currentRole() === 'customer'">
    <a ng-href="/accounts/{{accountSlug()}}/{{currentRole()}}/rewards" title="Rewards">
      <i class="fa fa-group"></i>
      <span class="caption">Rewards</span>
    </a>
  </li>

  <li class="sidebar-item" ng-if="currentRole() === 'broker'">
    <a ng-href="/accounts/{{accountSlug()}}/{{currentRole()}}/settings" title="Account Settings">
      <i class="fa fa-user"></i>
      <span class="caption">Account Settings</span>
    </a>
  </li>

  <li class="sidebar-item" ng-if="currentRole() === 'broker' || currentRole() === 'group_admin'">
    <a ng-href="/accounts/{{accountSlug()}}/{{currentRole()}}/reports" title="Reports">
      <i class="fa fa-file-text"></i>
      <span class="caption">Reports</span>
    </a>
  </li>

  <li class="sidebar-item" ng-if="currentRole() === 'broker' && featureEnabled('api_tokens')">
    <a ng-href="/accounts/{{accountSlug()}}/{{currentRole()}}/tokens" title="API Tokens">
      <i class="fa fa-ticket"></i>
      <span class="caption">API Tokens</span>
    </a>
  </li>

  <li class="sidebar-item" ng-if="(currentRole() === 'broker' || currentRole() === 'group_admin') && featureEnabled('eligibility_modal')">
    <a href="#" data-toggle="modal" data-target="#eligibility-modal" title="Check Eligibility">
      <i class="fa fa-question"></i>
      <span class="caption">Check Eligibility</span>
    </a>
  </li>

  <li class="sidebar-item" ng-if="!firstName()">
    <a href="/users/signin" title="Sign In">
      <i class="glyphicon glyphicon-user"></i>
      <span class="caption">Sign In</span>
    </a>
  </li>

  <li class="sidebar-item" ng-if="!firstName()">
    <a href="/users/new_manager" title="Sign Up">
      <i class="glyphicon glyphicon-user"></i>
      <span class="caption">Sign Up</span>
    </a>
  </li>

  <!-- Show Support Link for everyone except admins -->
  <li class="sidebar-item" ng-if="!inAdminPanel()">
    <a href="/accounts/{{accountSlug()}}/{{currentRole()}}/contact" title="Support">
      <i class="fa fa-question-circle"></i>
      <span class="caption">Get Help</span>
    </a>
  </li>
</ul>

